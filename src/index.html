!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Demo Website</title>

  <!-- Include Bootstrap (optional, for styling) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstr>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstr>

  <!-- Load Turnstile API -->
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" defer><>

  <style>
    html, body {
      height: 100%;
    }
    body {
      display: flex;
     align-items: center;
      justify-content: center;
      padding-top: 40px;
      padding-bottom: 40px;
      background-color: #fefefe;
    }

    .turnstile-container {
      width: 100%;
      max-width: 330px;
      padding: 15px;
      text-align: center;
    }

    .turnstile-widget {
      margin-bottom: 20px;
    }

    .error-message {
      color: red;
      display: none;
      font-weight: bold;
    }
  </style>
</head>
<body>
<main class="form-signin">
  <form method="POST" action="/handler">
    <h2 class="h3 mb-3 fw-normal">Demo</h2>

<div class="turnstile-container">
  <h2 class="h3 mb-3 fw-normal">Please complete the CAPTCHA</h2>
    <div class="checkbox mb-3">
    
      <!-- The following line controls and configures the Turnstile widget. -->
      export default {
  async fetch(request, env) {
    const SITE_KEY = env.SITE_KEY
    let res = await fetch(request)

    // Instantiate the API to run on specific elements, for example, `head`, `div`
    let newRes = new HTMLRewriter()

      // `.on` attaches the element handler and this allows you to match on element/attributes or to use the specific methods per the API
      .on('head', {
        element(element) {

          // In this case, you are using `append` to add a new script to the `head` element
          element.append(`<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>`, { html: true });
        },
      })
      .on('div', {
        element(element) {

          // You are using the `getAttribute` method here to retrieve the `id` or `class` of an element
          if (element.getAttribute('id') === <NAME_OF_ATTRIBUTE>) {
            element.append(`<div class="cf-turnstile" data-sitekey="${SITE_KEY}" data-theme="light"></div>`, { html: true });
          }
        },
      })
      .transform(res);
    return newRes
  }
}
      <!-- end. -->
    </div>
    <button class="w-100 btn btn-lg btn-primary" type="submit">Submit</button>
    <p class="mt-5 mb-3 text-muted"><a href="https://www.example.com"></a></p>
    <p class="mt-5 mb-3 text-muted"><a href="/index.mjs"></a></p>
  </form>
</body>
</html>
